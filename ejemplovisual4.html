<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Men√∫ - Explicaci√≥n Completa</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 30px;
        }

        .section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .game-world {
            width: 100%;
            height: 400px;
            background: #1a1a2e;
            border: 3px solid #16213e;
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .menu-demo {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            transition: all 0.5s ease;
        }

        .menu-title {
            font-size: 3em;
            font-weight: bold;
            color: white;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            margin-bottom: 20px;
            animation: title-pulse 2s infinite;
        }

        @keyframes title-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .menu-button {
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            border: none;
            color: white;
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            animation: button-glow 2s infinite alternate;
        }

        @keyframes button-glow {
            0% { box-shadow: 0 0 10px rgba(231, 76, 60, 0.5); }
            100% { box-shadow: 0 0 20px rgba(231, 76, 60, 0.8); }
        }

        .menu-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(145deg, #c0392b, #a93226);
        }

        .game-demo {
            position: relative;
            width: 100%;
            height: 300px;
            background: #2c3e50;
            border-radius: 10px;
            display: none;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
        }

        .player-demo {
            width: 50px;
            height: 50px;
            background: linear-gradient(145deg, #888, #666);
            border: 2px solid #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            position: absolute;
            left: 50px;
            top: 50%;
            transform: translateY(-50%);
        }

        .villain-demo {
            width: 50px;
            height: 50px;
            background: linear-gradient(145deg, #3498db, #2980b9);
            border: 2px solid #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
        }

        .code-explanation {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            border-left: 4px solid #3498db;
            margin: 15px 0;
        }

        .variable-highlight {
            background: rgba(255, 255, 0, 0.3);
            padding: 2px 4px;
            border-radius: 3px;
            color: #ffd700;
            font-weight: bold;
        }

        .concept-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .step-by-step {
            counter-reset: step-counter;
        }

        .step {
            counter-increment: step-counter;
            background: rgba(0,0,0,0.2);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            position: relative;
        }

        .step::before {
            content: "Paso " counter(step-counter);
            background: #3498db;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            position: absolute;
            top: -8px;
            left: 15px;
        }

        .state-flow {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            flex-wrap: wrap;
        }

        .state-box {
            background: linear-gradient(145deg, #3498db, #2980b9);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 5px;
            min-width: 120px;
            position: relative;
        }

        .state-box.active {
            background: linear-gradient(145deg, #27ae60, #229954);
            animation: state-active 1s infinite alternate;
        }

        @keyframes state-active {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        .arrow {
            font-size: 24px;
            color: #ffd700;
            margin: 0 10px;
        }

        .controls-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .demo-panel {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 10px;
        }

        .demo-button {
            background: linear-gradient(145deg, #3498db, #2980b9);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            background: linear-gradient(145deg, #2980b9, #1f4e79);
        }

        .demo-button.active {
            background: linear-gradient(145deg, #27ae60, #229954);
        }

        .interactive-demo {
            background: rgba(52, 152, 219, 0.1);
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .warning-box {
            background: rgba(241, 196, 15, 0.1);
            border: 2px solid #f1c40f;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        .math-example {
            background: rgba(46, 204, 113, 0.1);
            border: 2px solid #2ecc71;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .flow-diagram {
            background: rgba(0,0,0,0.5);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }

        .flow-step {
            display: inline-block;
            background: #3498db;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 5px;
            position: relative;
        }

        .flow-step::after {
            content: "‚Üí";
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffd700;
            font-size: 18px;
        }

        .flow-step:last-child::after {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéõÔ∏è Sistema de Men√∫ - Explicaci√≥n Completa</h1>

        <!-- INTRODUCCI√ìN -->
        <div class="section">
            <h2>üéØ ¬øQu√© es un Sistema de Men√∫?</h2>
            <p>Un sistema de men√∫ es la <strong>interfaz inicial</strong> de tu juego. Es lo primero que ve el jugador y controla la transici√≥n entre "no jugando" y "jugando activamente". Aprenderemos:</p>
            <ul>
                <li>üé® <strong>Crear elementos visuales:</strong> T√≠tulo, botones, fondos</li>
                <li>üîÑ <strong>Gestionar estados:</strong> Men√∫ vs Juego activo</li>
                <li>üéÆ <strong>Controlar scripts:</strong> Pausar/activar comportamientos</li>
                <li>üì∑ <strong>Manejar c√°maras:</strong> Posiciones diferentes para men√∫ y juego</li>
                <li>üñ±Ô∏è <strong>Detectar eventos:</strong> Clicks, toques, teclas</li>
            </ul>

            <div class="concept-box">
                <h3>üîë Concepto Clave: Estados del Juego</h3>
                <p>Tu juego puede estar en diferentes <strong>estados</strong>:</p>
                <ul>
                    <li>üè† <strong>MEN√ö:</strong> Mostrando t√≠tulo, esperando click</li>
                    <li>üéÆ <strong>JUGANDO:</strong> Controles activos, l√≥gica funcionando</li>
                    <li>‚è∏Ô∏è <strong>PAUSADO:</strong> Juego detenido temporalmente</li>
                    <li>üíÄ <strong>GAME OVER:</strong> Fin de partida, decidir si continuar</li>
                </ul>
            </div>
        </div>

        <!-- DEMO INTERACTIVA -->
        <div class="section">
            <h2>üéÆ DEMO: Transici√≥n Men√∫ ‚Üî Juego</h2>

            <div class="menu-demo" id="menu-demo">
                <div class="menu-title">THE BOX</div>
                <button class="menu-button" onclick="startGame()">CLICK TO PLAY</button>
                <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
                    Click del mouse o toque para iniciar
                </div>
            </div>

            <div class="game-demo" id="game-demo">
                <div class="player-demo">üéÆ</div>
                <div class="villain-demo">ü¶π‚Äç‚ôÇÔ∏è</div>
                <div style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 6px;">
                    <strong>üéÆ JUEGO ACTIVO</strong><br>
                    Scripts funcionando<br>
                    Controles habilitados
                </div>
                <button style="position: absolute; bottom: 20px; right: 20px; background: #e74c3c; border: none; color: white; padding: 10px 20px; border-radius: 6px; cursor: pointer;" onclick="backToMenu()">
                    ESC - Volver al Men√∫
                </button>
            </div>

            <div class="controls-demo">
                <div class="demo-panel">
                    <h3>üîß Control Manual</h3>
                    <button class="demo-button" onclick="showMenu()">Mostrar Men√∫</button>
                    <button class="demo-button" onclick="showGame()">Mostrar Juego</button>
                    <div style="margin-top: 15px; font-size: 0.9em; opacity: 0.8;">
                        Usa estos botones para ver la transici√≥n manualmente
                    </div>
                </div>

                <div class="demo-panel">
                    <h3>üìä Estado Actual</h3>
                    <div><strong>Estado:</strong> <span id="current-state">MEN√ö</span></div>
                    <div><strong>Scripts:</strong> <span id="scripts-status">PAUSADOS</span></div>
                    <div><strong>C√°mara:</strong> <span id="camera-status">MEN√ö</span></div>
                    <div><strong>Elementos:</strong> <span id="elements-status">MEN√ö VISIBLE</span></div>
                </div>
            </div>

            <div class="interactive-demo">
                <strong>üéØ PRUEBA LA DEMO:</strong> Haz click en "CLICK TO PLAY" y observa:
                <ul>
                    <li>üé® Transici√≥n visual suave entre men√∫ y juego</li>
                    <li>üìä Los estados cambian en el panel de informaci√≥n</li>
                    <li>üîÑ Usa "ESC" para volver al men√∫ desde el juego</li>
                    <li>üéõÔ∏è Los botones manuales te permiten ver cada estado</li>
                </ul>
            </div>
        </div>

        <!-- PUNTO 1: ESTRUCTURA B√ÅSICA -->
        <div class="section">
            <h2>üèóÔ∏è PUNTO 1: Estructura B√°sica del MenuManager</h2>

            <div class="concept-box">
                <h3>üß© ¬øC√≥mo est√° organizado el MenuManager?</h3>
                <p>El MenuManager es como el <strong>"director de orquesta"</strong> de tu juego. Coordina todos los elementos y scripts para crear una experiencia fluida.</p>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>Inicializaci√≥n - Preparar Todo:</strong>
                    <div class="code-explanation">
var MenuManager = pc.createScript('menu');

MenuManager.prototype.initialize = function() {
    console.log("üéÆ Menu Manager iniciando...");
    
    // Estados del juego
    this.<span class="variable-highlight">estado</span> = 'menu'; // 'menu' o 'jugando'
    
    // Referencias a scripts del juego
    this.<span class="variable-highlight">jugadorScript</span> = null;
    this.<span class="variable-highlight">villanoScript</span> = null;
    
    // Elementos del men√∫ y juego
    this.<span class="variable-highlight">elementosMenu</span> = [];     // Lista de objetos del men√∫
    this.<span class="variable-highlight">elementosJuego</span> = [];   // Lista de objetos del juego
    
    // Variables de control
    this.<span class="variable-highlight">menuActivo</span> = false;
    this.<span class="variable-highlight">juegoIniciado</span> = false;
};
                    </div>
                </div>

                <div class="step">
                    <strong>Buscar Scripts - Conectar con Otros Sistemas:</strong>
                    <div class="code-explanation">
MenuManager.prototype.buscarScripts = function() {
    // Buscar script del jugador (Box con script 'movimiento')
    var <span class="variable-highlight">jugador</span> = this.app.root.findByName('Box');
    if (jugador && jugador.script && jugador.script.movimiento) {
        this.<span class="variable-highlight">jugadorScript</span> = jugador.script.movimiento;
        console.log("‚úÖ Script del jugador encontrado");
    }
    
    // Buscar script del villano (Box2 con script 'villano')
    var <span class="variable-highlight">villano</span> = this.app.root.findByName('Box2');
    if (villano && villano.script && villano.script.villano) {
        this.<span class="variable-highlight">villanoScript</span> = villano.script.villano;
        console.log("‚úÖ Script del villano encontrado");
    }
};
                    </div>
                </div>

                <div class="step">
                    <strong>Organizar Elementos - Catalogar Todo:</strong>
                    <div class="code-explanation">
MenuManager.prototype.guardarElementosJuego = function() {
    // Buscar elementos principales del juego
    var elementos = ['Box', 'Box2', 'Plane'];
    
    for (var i = 0; i < elementos.length; i++) {
        var elemento = this.app.root.findByName(elementos[i]);
        if (elemento) {
            this.<span class="variable-highlight">elementosJuego</span>.push(elemento);
            console.log("üì¶ Elemento encontrado:", elementos[i]);
        }
    }
    
    console.log("üì¶ Total elementos guardados:", this.elementosJuego.length);
};
                    </div>
                </div>
            </div>

            <div class="math-example">
<strong>üßÆ Analog√≠a de la Casa:</strong>
Imagina que el MenuManager es el administrador de una casa:

‚Ä¢ <span class="variable-highlight">estado</span> = "¬øEstamos en la sala o en la cocina?"
‚Ä¢ <span class="variable-highlight">jugadorScript</span> = "Referencia a la persona que cocina"
‚Ä¢ <span class="variable-highlight">villanoScript</span> = "Referencia a la persona que limpia"
‚Ä¢ <span class="variable-highlight">elementosMenu</span> = "Lista de muebles de la sala"
‚Ä¢ <span class="variable-highlight">elementosJuego</span> = "Lista de muebles de la cocina"

Cuando cambiamos de "sala" a "cocina", movemos muebles y cambiamos actividades.
            </div>
        </div>

        <!-- PUNTO 2: CREACI√ìN VISUAL -->
        <div class="section">
            <h2>üé® PUNTO 2: Creaci√≥n de Elementos Visuales</h2>

            <div class="concept-box">
                <h3>üñºÔ∏è ¬øC√≥mo se crean elementos 3D para el men√∫?</h3>
                <p>En PlayCanvas, todo lo visual son <strong>entidades con componentes</strong>. Para crear un men√∫, construimos objetos 3D que parecen elementos 2D.</p>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>Crear Fondo del Men√∫:</strong>
                    <div class="code-explanation">
// === FONDO AZUL S√ìLIDO ===
var <span class="variable-highlight">fondo</span> = new pc.Entity('MenuFondo');
fondo.addComponent('render', { type: <span class="variable-highlight">'plane'</span> });
fondo.setPosition(0, 0, -5);  // Atr√°s de todo
fondo.setLocalScale(25, 20, 1); // MUY GRANDE para tapar todo

var <span class="variable-highlight">materialFondo</span> = new pc.StandardMaterial();
materialFondo.diffuse.set(<span class="variable-highlight">0.2, 0.4, 0.7</span>); // Azul
materialFondo.update();
fondo.render.meshInstances[0].material = materialFondo;

this.app.root.<span class="variable-highlight">addChild(fondo)</span>;
this.<span class="variable-highlight">elementosMenu.push(fondo)</span>; // Recordar para ocultar despu√©s
                    </div>
                </div>

                <div class="step">
                    <strong>Crear T√≠tulo "THE BOX" con Cubos:</strong>
                    <div class="code-explanation">
MenuManager.prototype.crearTituloConCubos = function() {
    // Definir cada letra como una lista de cubos
    var letras = [
        // T
        {x: -4, y: 1, w: 0.6, h: 0.3, d: 0.3},   // Base de T
        {x: -4, y: 1.5, w: 0.3, h: 0.3, d: 0.3}, // Palo de T
        {x: -4, y: 2, w: 0.3, h: 0.3, d: 0.3},   // Palo de T
        {x: -4.3, y: 2, w: 0.3, h: 0.3, d: 0.3}, // Brazo izq de T
        {x: -3.7, y: 2, w: 0.3, h: 0.3, d: 0.3}, // Brazo der de T
        
        // H, E, B, O, X... (m√°s cubos)
    ];
    
    // Material blanco brillante para las letras
    var <span class="variable-highlight">materialLetra</span> = new pc.StandardMaterial();
    materialLetra.diffuse.set(<span class="variable-highlight">1, 1, 1</span>); // Blanco
    materialLetra.emissive.set(<span class="variable-highlight">0.4, 0.4, 0.4</span>); // Brillo
    materialLetra.update();
    
    // Crear cada cubo de letra
    for (var i = 0; i < letras.length; i++) {
        var letra = letras[i];
        var <span class="variable-highlight">cubo</span> = new pc.Entity('Letra' + i);
        cubo.addComponent('render', { type: 'box' });
        cubo.setPosition(letra.x, letra.y, 0);
        cubo.setLocalScale(letra.w, letra.h, letra.d);
        cubo.render.meshInstances[0].material = materialLetra;
        
        this.app.root.addChild(cubo);
        this.<span class="variable-highlight">elementosMenu.push(cubo)</span>; // Agregar a la lista
    }
};
                    </div>
                </div>

                <div class="step">
                    <strong>Crear Bot√≥n de Juego:</strong>
                    <div class="code-explanation">
// === BOT√ìN PLAY ===
var <span class="variable-highlight">botonPlay</span> = new pc.Entity('BotonPlay');
botonPlay.addComponent('render', { type: 'box' });
botonPlay.setPosition(0, -1.5, 0);
botonPlay.setLocalScale(3, 0.8, 0.4);

var <span class="variable-highlight">materialBoton</span> = new pc.StandardMaterial();
materialBoton.diffuse.set(<span class="variable-highlight">1, 0.5, 0</span>); // Naranja
materialBoton.emissive.set(<span class="variable-highlight">0.2, 0.1, 0</span>); // Brillo sutil
materialBoton.update();
botonPlay.render.meshInstances[0].material = materialBoton;

this.app.root.addChild(botonPlay);
this.elementosMenu.push(botonPlay);
this.<span class="variable-highlight">botonPlay</span> = botonPlay; // Referencia para animar
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Puntos Importantes sobre Elementos Visuales:</h4>
                <ul>
                    <li><strong>Posici√≥n Z:</strong> Los elementos del men√∫ van en Z=0 o positivo, el fondo en Z negativo</li>
                    <li><strong>Escala:</strong> Usa <code>setLocalScale()</code> para hacer objetos m√°s grandes o peque√±os</li>
                    <li><strong>Materiales:</strong> Siempre llamar <code>material.update()</code> despu√©s de cambiar colores</li>
                    <li><strong>Referencias:</strong> Guarda referencias a objetos importantes para poder animarlos</li>
                </ul>
            </div>
        </div>

        <!-- PUNTO 3: CONTROL DE ESTADOS -->
        <div class="section">
            <h2>üîÑ PUNTO 3: Sistema de Control de Estados</h2>

            <div class="state-flow">
                <div class="state-box active" id="state-menu">
                    <strong>üè† MEN√ö</strong><br>
                    <small>Scripts pausados</small><br>
                    <small>Men√∫ visible</small>
                </div>
                <div class="arrow">‚Üí</div>
                <div class="state-box" id="state-transition">
                    <strong>üîÑ TRANSICI√ìN</strong><br>
                    <small>Ocultar men√∫</small><br>
                    <small>Mostrar juego</small>
                </div>
                <div class="arrow">‚Üí</div>
                <div class="state-box" id="state-game">
                    <strong>üéÆ JUEGO</strong><br>
                    <small>Scripts activos</small><br>
                    <small>Controles funcionando</small>
                </div>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>Activar Men√∫ - Estado Inicial:</strong>
                    <div class="code-explanation">
MenuManager.prototype.activarMenu = function() {
    console.log("üìã Activando men√∫...");
    
    this.<span class="variable-highlight">estado</span> = 'menu';
    this.<span class="variable-highlight">menuActivo</span> = true;
    
    // 1. Configurar c√°mara para el men√∫
    this.<span class="variable-highlight">configurarCamaraMenu()</span>;
    
    // 2. Ocultar elementos del juego
    this.<span class="variable-highlight">ocultarElementosJuego()</span>;
    
    // 3. Mostrar elementos del men√∫
    this.<span class="variable-highlight">mostrarElementosMenu()</span>;
    
    // 4. Pausar scripts del juego
    this.<span class="variable-highlight">pausarScriptsJuego()</span>;
    
    // 5. Iniciar animaciones del men√∫
    this.<span class="variable-highlight">iniciarAnimacionesMenu()</span>;
    
    console.log("‚úÖ Men√∫ activo - Click para iniciar THE BOX");
};
                    </div>
                </div>

                <div class="step">
                    <strong>Iniciar Juego - Transici√≥n Principal:</strong>
                    <div class="code-explanation">
MenuManager.prototype.iniciarJuego = function() {
    console.log("üéÆ ¬°Iniciando THE BOX!");
    
    this.<span class="variable-highlight">estado</span> = 'jugando';
    this.<span class="variable-highlight">menuActivo</span> = false;
    this.<span class="variable-highlight">juegoIniciado</span> = true;
    
    // 1. Ocultar men√∫
    this.<span class="variable-highlight">ocultarElementosMenu()</span>;
    
    // 2. Mostrar elementos del juego
    this.<span class="variable-highlight">mostrarElementosJuego()</span>;
    
    // 3. Configurar c√°mara para el juego
    this.<span class="variable-highlight">configurarCamaraJuego()</span>;
    
    // 4. Reiniciar posiciones del juego
    this.<span class="variable-highlight">reiniciarPosicionesJuego()</span>;
    
    // 5. Activar scripts del juego
    this.<span class="variable-highlight">activarScriptsJuego()</span>;
    
    console.log("‚úÖ THE BOX iniciado - Usa WASD + SPACE para jugar");
};
                    </div>
                </div>

                <div class="step">
                    <strong>Control de Visibilidad - Mostrar/Ocultar:</strong>
                    <div class="code-explanation">
// Ocultar elementos del juego
MenuManager.prototype.ocultarElementosJuego = function() {
    for (var i = 0; i < this.<span class="variable-highlight">elementosJuego</span>.length; i++) {
        this.elementosJuego[i].<span class="variable-highlight">enabled</span> = false;
    }
    console.log("üôà Elementos del juego ocultados");
};

// Mostrar elementos del juego
MenuManager.prototype.mostrarElementosJuego = function() {
    for (var i = 0; i < this.<span class="variable-highlight">elementosJuego</span>.length; i++) {
        this.elementosJuego[i].<span class="variable-highlight">enabled</span> = true;
    }
    console.log("üëÅÔ∏è Elementos del juego mostrados");
};

// Ocultar elementos del men√∫
MenuManager.prototype.ocultarElementosMenu = function() {
    for (var i = 0; i < this.<span class="variable-highlight">elementosMenu</span>.length; i++) {
        this.elementosMenu[i].<span class="variable-highlight">enabled</span> = false;
    }
    
    if (this.animacionMenu) {
        clearInterval(this.animacionMenu); // Detener animaciones
    }
    
    console.log("üôà Elementos del men√∫ ocultados");
};
                    </div>
                </div>

                <div class="step">
                    <strong>Control de Scripts - Pausar/Activar:</strong>
                    <div class="code-explanation">
// Pausar scripts del juego
MenuManager.prototype.pausarScriptsJuego = function() {
    if (this.<span class="variable-highlight">jugadorScript</span>) {
        this.jugadorScript.<span class="variable-highlight">enabled</span> = false;
        console.log("‚è∏Ô∏è Script del jugador pausado");
    }
    if (this.<span class="variable-highlight">villanoScript</span>) {
        this.villanoScript.<span class="variable-highlight">enabled</span> = false;
        console.log("‚è∏Ô∏è Script del villano pausado");
    }
};

// Activar scripts del juego
MenuManager.prototype.activarScriptsJuego = function() {
    if (this.<span class="variable-highlight">jugadorScript</span>) {
        this.jugadorScript.<span class="variable-highlight">enabled</span> = true;
        console.log("‚ñ∂Ô∏è Script del jugador activado");
    }
    if (this.<span class="variable-highlight">villanoScript</span>) {
        this.villanoScript.<span class="variable-highlight">enabled</span> = true;
        console.log("‚ñ∂Ô∏è Script del villano activado");
    }
};
                    </div>
                </div>
            </div>

            <div class="concept-box">
                <h3>üîë ¬øQu√© significa <code>enabled = false</code>?</h3>
                <p>Cuando pones <code>enabled = false</code> en un objeto o script:</p>
                <ul>
                    <li><strong>Entidades:</strong> Se vuelven invisibles e no interact√∫an</li>
                    <li><strong>Scripts:</strong> Su funci√≥n <code>update()</code> deja de ejecutarse</li>
                    <li><strong>Componentes:</strong> Dejan de procesar (render, physics, etc.)</li>
                </ul>
                <p>Es como poner "pausa" a esa parte espec√≠fica del juego.</p>
            </div>
        </div>

        <!-- PUNTO 4: DETECCI√ìN DE EVENTOS -->
        <div class="section">
            <h2>üñ±Ô∏è PUNTO 4: Detecci√≥n de Eventos de Usuario</h2>

            <div class="concept-box">
                <h3>üëÜ ¬øC√≥mo detectar clicks y toques?</h3>
                <p>Para que el men√∫ sea interactivo, necesitamos detectar cuando el usuario hace click o toca la pantalla. PlayCanvas nos da eventos para esto.</p>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>Configurar Event Listeners:</strong>
                    <div class="code-explanation">
MenuManager.prototype.configurarControles = function() {
    var <span class="variable-highlight">self</span> = this; // Guardar referencia para usar en callbacks
    
    // Click del mouse para iniciar juego
    this.app.mouse.<span class="variable-highlight">on</span>(pc.EVENT_MOUSEDOWN, function(event) {
        if (self.<span class="variable-highlight">estado</span> === 'menu') {
            console.log("üñ±Ô∏è Click detectado - Iniciando juego");
            self.<span class="variable-highlight">iniciarJuego()</span>;
        }
    });
    
    // Touch para dispositivos m√≥viles
    if (this.app.touch) {
        this.app.touch.<span class="variable-highlight">on</span>(pc.EVENT_TOUCHSTART, function(event) {
            if (self.<span class="variable-highlight">estado</span> === 'menu') {
                console.log("üëÜ Touch detectado - Iniciando juego");
                self.<span class="variable-highlight">iniciarJuego()</span>;
            }
        });
    }
    
    console.log("üéÆ Controles configurados");
};
                    </div>
                </div>

                <div class="step">
                    <strong>Detecci√≥n de Tecla ESC (Volver al Men√∫):</strong>
                    <div class="code-explanation">
MenuManager.prototype.update = function(dt) {
    // Verificar tecla ESC para volver al men√∫
    var <span class="variable-highlight">input</span> = this.app.keyboard;
    if (input && input.<span class="variable-highlight">wasPressed</span> && input.wasPressed(pc.KEY_ESCAPE)) {
        if (this.<span class="variable-highlight">estado</span> === 'jugando') {
            this.<span class="variable-highlight">volverAlMenu()</span>;
        }
    }
};

MenuManager.prototype.volverAlMenu = function() {
    console.log("üè† Volviendo al men√∫...");
    this.<span class="variable-highlight">activarMenu()</span>; // Reutilizar la funci√≥n de activar men√∫
};
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h4>‚ö†Ô∏è Problema Com√∫n: <code>this</code> en Callbacks</h4>
                <div class="code-explanation">
// ‚ùå PROBLEMA: 'this' cambia dentro del callback
this.app.mouse.on(pc.EVENT_MOUSEDOWN, function(event) {
    this.iniciarJuego(); // ‚ùå 'this' ya no es MenuManager
});

// ‚úÖ SOLUCI√ìN: Guardar 'this' en 'self'
var <span class="variable-highlight">self</span> = this;
this.app.mouse.on(pc.EVENT_MOUSEDOWN, function(event) {
    <span class="variable-highlight">self</span>.iniciarJuego(); // ‚úÖ 'self' sigue siendo MenuManager
});
                </div>
            </div>
        </div>

        <!-- PUNTO 5: ANIMACIONES -->
        <div class="section">
            <h2>‚ú® PUNTO 5: Animaciones del Men√∫</h2>

            <div class="concept-box">
                <h3>üé¨ ¬øPor qu√© animar el men√∫?</h3>
                <p>Las animaciones hacen que el men√∫ se sienta <strong>vivo y profesional</strong>. Sin animaciones, el men√∫ se ve est√°tico y aburrido.</p>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>Sistema de Animaci√≥n con Intervalos:</strong>
                    <div class="code-explanation">
MenuManager.prototype.iniciarAnimacionesMenu = function() {
    if (this.<span class="variable-highlight">animacionMenu</span>) {
        clearInterval(this.animacionMenu); // Limpiar animaci√≥n anterior
    }
    
    var <span class="variable-highlight">self</span> = this;
    var <span class="variable-highlight">tiempo</span> = 0;
    
    this.<span class="variable-highlight">animacionMenu</span> = setInterval(function() {
        // Si ya no estamos en el men√∫, detener animaci√≥n
        if (!self.<span class="variable-highlight">menuActivo</span> || self.<span class="variable-highlight">estado</span> !== 'menu') {
            clearInterval(self.animacionMenu);
            return;
        }
        
        <span class="variable-highlight">tiempo += 0.05</span>; // Incrementar tiempo
        
        // Animar el bot√≥n PLAY
        if (self.<span class="variable-highlight">botonPlay</span>) {
            // Pulsaci√≥n usando seno
            var <span class="variable-highlight">escala</span> = 1 + Math.sin(tiempo * 3) * 0.1;
            self.botonPlay.<span class="variable-highlight">setLocalScale</span>(3 * escala, 0.8 * escala, 0.4);
            
            // Cambiar brillo del material
            var <span class="variable-highlight">material</span> = self.botonPlay.render.meshInstances[0].material;
            var <span class="variable-highlight">brillo</span> = 0.1 + Math.sin(tiempo * 4) * 0.2;
            material.emissive.<span class="variable-highlight">set</span>(brillo * 2, brillo, 0);
            material.<span class="variable-highlight">update()</span>;
        }
        
    }, 50); // Ejecutar cada 50ms (20 FPS para animaciones)
};
                    </div>
                </div>

                <div class="step">
                    <strong>Matem√°ticas de las Animaciones:</strong>
                    <div class="code-explanation">
// Funci√≥n seno para movimiento suave
var <span class="variable-highlight">escala</span> = 1 + Math.sin(tiempo * velocidad) * amplitud;

// Donde:
// ‚Ä¢ <span class="variable-highlight">tiempo</span> = tiempo transcurrido (siempre aumentando)
// ‚Ä¢ <span class="variable-highlight">velocidad</span> = qu√© tan r√°pido cambia (3 = 3 veces por segundo)
// ‚Ä¢ <span class="variable-highlight">amplitud</span> = qu√© tanto cambia (0.1 = ¬±10% del tama√±o original)

// Ejemplos:
Math.sin(tiempo * 2) * 0.05  // Cambio lento y sutil
Math.sin(tiempo * 5) * 0.3   // Cambio r√°pido y dram√°tico
Math.sin(tiempo * 1) * 0.02  // Cambio muy lento y muy sutil
                    </div>
                </div>
            </div>

            <div class="math-example">
<strong>üßÆ Ejemplo de Animaci√≥n Paso a Paso:</strong>

<strong>Tiempo = 0.0 segundos:</strong>
‚Ä¢ Math.sin(0 * 3) = Math.sin(0) = 0
‚Ä¢ escala = 1 + 0 * 0.1 = 1.0 (tama√±o normal)

<strong>Tiempo = 0.5 segundos:</strong>
‚Ä¢ Math.sin(0.5 * 3) = Math.sin(1.5) ‚âà 0.997
‚Ä¢ escala = 1 + 0.997 * 0.1 ‚âà 1.1 (10% m√°s grande)

<strong>Tiempo = 1.0 segundos:</strong>
‚Ä¢ Math.sin(1.0 * 3) = Math.sin(3) ‚âà 0.141
‚Ä¢ escala = 1 + 0.141 * 0.1 ‚âà 1.014 (casi normal)

<strong>Resultado:</strong> El bot√≥n pulsa suavemente de normal ‚Üí grande ‚Üí normal
            </div>
        </div>

        <!-- PUNTO 6: GESTI√ìN DE C√ÅMARA -->
        <div class="section">
            <h2>üì∑ PUNTO 6: Gesti√≥n de C√°mara</h2>

            <div class="concept-box">
                <h3>üé• ¬øPor qu√© cambiar la posici√≥n de la c√°mara?</h3>
                <p>La c√°mara debe estar en <strong>diferentes posiciones</strong> para el men√∫ y el juego:</p>
                <ul>
                    <li><strong>Men√∫:</strong> Cerca, enfocando los elementos del men√∫</li>
                    <li><strong>Juego:</strong> Lejos, viendo toda la acci√≥n</li>
                </ul>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>C√°mara para el Men√∫:</strong>
                    <div class="code-explanation">
MenuManager.prototype.configurarCamaraMenu = function() {
    var <span class="variable-highlight">camera</span> = this.app.root.findByName('Camera');
    if (camera) {
        // Posici√≥n cerca para ver bien el men√∫
        camera.<span class="variable-highlight">setPosition</span>(0, 2, 8);
        camera.<span class="variable-highlight">setEulerAngles</span>(-10, 0, 0); // Mirando ligeramente hacia abajo
        console.log("üì∏ C√°mara configurada para men√∫");
    }
};
                    </div>
                </div>

                <div class="step">
                    <strong>C√°mara para el Juego:</strong>
                    <div class="code-explanation">
MenuManager.prototype.configurarCamaraJuego = function() {
    var <span class="variable-highlight">camera</span> = this.app.root.findByName('Camera');
    if (camera) {
        // Posici√≥n m√°s lejos para ver toda la acci√≥n
        camera.<span class="variable-highlight">setPosition</span>(0, 4, 10);
        camera.<span class="variable-highlight">setEulerAngles</span>(-15, 0, 0); // √Ångulo para ver mejor el suelo
        console.log("üì∏ C√°mara configurada para juego");
    }
};
                    </div>
                </div>
            </div>

            <div class="flow-diagram">
                <h3>üé¨ Flujo Visual de Transiciones</h3>
                <div>
                    <div class="flow-step">C√°mara Cerca</div>
                    <div class="flow-step">Mostrar Men√∫</div>
                    <div class="flow-step">Animar Botones</div>
                    <div class="flow-step">Detectar Click</div>
                    <div class="flow-step">Ocultar Men√∫</div>
                    <div class="flow-step">C√°mara Lejos</div>
                    <div class="flow-step">Mostrar Juego</div>
                    <div class="flow-step">Activar Scripts</div>
                </div>
            </div>
        </div>

        <!-- PUNTO 7: M√âTODOS P√öBLICOS -->
        <div class="section">
            <h2>üîó PUNTO 7: M√©todos P√∫blicos - Conectar con Otros Scripts</h2>

            <div class="concept-box">
                <h3>ü§ù ¬øPor qu√© necesitamos m√©todos p√∫blicos?</h3>
                <p>Otros scripts (como el de movimiento) necesitan preguntarle al MenuManager <strong>"¬øPuedo funcionar ahora?"</strong> o decirle <strong>"¬°El jugador muri√≥!"</strong></p>
            </div>

            <div class="step-by-step">
                <div class="step">
                    <strong>M√©todo para Verificar Estado:</strong>
                    <div class="code-explanation">
// M√âTODO QUE NECESITA EL SCRIPT DE MOVIMIENTO
MenuManager.prototype.<span class="variable-highlight">juegoActivo</span> = function() {
    return this.<span class="variable-highlight">estado</span> === 'jugando' && this.<span class="variable-highlight">juegoIniciado</span>;
};

// Uso en script de movimiento:
if (this.menuManager.<span class="variable-highlight">juegoActivo()</span>) {
    // Solo entonces procesar movimiento WASD
    this.procesarMovimiento();
}
                    </div>
                </div>

                <div class="step">
                    <strong>M√©todo para Game Over:</strong>
                    <div class="code-explanation">
MenuManager.prototype.<span class="variable-highlight">jugadorMurio</span> = function() {
    console.log("üíÄ ¬°Jugador ha muerto!");
    var <span class="variable-highlight">self</span> = this;
    
    // Esperar un momento antes de mostrar mensaje
    setTimeout(function() {
        var <span class="variable-highlight">reiniciar</span> = confirm("üíÄ GAME OVER\n\n¬øJugar de nuevo?");
        if (reiniciar) {
            self.<span class="variable-highlight">iniciarJuego()</span>; // Reiniciar juego
        } else {
            self.<span class="variable-highlight">volverAlMenu()</span>; // Volver al men√∫
        }
    }, 500);
};

// Uso en script de villano cuando proyectil impacta:
if (this.menuManager && this.menuManager.jugadorMurio) {
    this.menuManager.<span class="variable-highlight">jugadorMurio()</span>;
}
                    </div>
                </div>
            </div>
        </div>

        <!-- RESUMEN FINAL -->
        <div class="section">
            <h2>üéØ RESUMEN: Sistema de Men√∫ Completo</h2>

            <div class="concept-box">
                <h3>üèÜ ¬°Has Aprendido a Crear un Sistema de Men√∫ Profesional!</h3>
                <p>Tu MenuManager ahora puede:</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin: 20px 0;">
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <strong>üé® Crear Visuales</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Fondos s√≥lidos</li>
                        <li>T√≠tulos con cubos</li>
                        <li>Botones animados</li>
                        <li>Efectos de brillo</li>
                    </ul>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <strong>üîÑ Gestionar Estados</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Men√∫ ‚Üî Juego</li>
                        <li>Pausar/Activar scripts</li>
                        <li>Mostrar/Ocultar elementos</li>
                        <li>Control de visibilidad</li>
                    </ul>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <strong>üñ±Ô∏è Detectar Eventos</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Clicks de mouse</li>
                        <li>Toques m√≥viles</li>
                        <li>Teclas (ESC)</li>
                        <li>Callbacks seguros</li>
                    </ul>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                    <strong>üì∑ Controlar C√°mara</strong>
                    <ul style="margin: 10px 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Posici√≥n de men√∫</li>
                        <li>Posici√≥n de juego</li>
                        <li>√Ångulos apropiados</li>
                        <li>Transiciones suaves</li>
                    </ul>
                </div>
            </div>

            <div style="background: rgba(46,204,113,0.1); border: 2px solid #2ecc71; border-radius: 8px; padding: 20px; margin: 20px 0;">
                <h3>‚úÖ Checklist de Implementaci√≥n</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div>
                        <h4>üìÅ Archivos Necesarios:</h4>
                        <ul style="font-size: 0.9em;">
                            <li>‚úÖ Script <code>menu.js</code> en PlayCanvas</li>
                            <li>‚úÖ Entidad con el script asignado</li>
                            <li>‚úÖ Referencias a <code>Box</code> y <code>Box2</code></li>
                            <li>‚úÖ C√°mara en la escena</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üîß Funciones Principales:</h4>
                        <ul style="font-size: 0.9em;">
                            <li>‚úÖ <code>activarMenu()</code></li>
                            <li>‚úÖ <code>iniciarJuego()</code></li>
                            <li>‚úÖ <code>juegoActivo()</code></li>
                            <li>‚úÖ <code>jugadorMurio()</code></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div style="background: rgba(52,152,219,0.1); border: 2px solid #3498db; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center;">
                <h3>üöÄ ¬°Listo para la Parte 2!</h3>
                <p style="font-size: 1.1em;">Ahora que tienes un sistema de men√∫ profesional, el siguiente paso es conectarlo correctamente con el sistema de movimiento.</p>
                <p><strong>En la Parte 2 aprender√°s:</strong> C√≥mo modificar el script de movimiento para que funcione perfectamente con tu MenuManager.</p>
            </div>
        </div>
    </div>

    <script>
        let currentState = 'menu';
        
        function updateStateDisplay() {
            // Actualizar indicadores visuales
            document.getElementById('current-state').textContent = currentState.toUpperCase();
            document.getElementById('scripts-status').textContent = currentState === 'menu' ? 'PAUSADOS' : 'ACTIVOS';
            document.getElementById('camera-status').textContent = currentState === 'menu' ? 'MEN√ö' : 'JUEGO';
            document.getElementById('elements-status').textContent = currentState === 'menu' ? 'MEN√ö VISIBLE' : 'JUEGO VISIBLE';
            
            // Actualizar estados en el diagrama
            document.getElementById('state-menu').className = currentState === 'menu' ? 'state-box active' : 'state-box';
            document.getElementById('state-transition').className = 'state-box';
            document.getElementById('state-game').className = currentState === 'game' ? 'state-box active' : 'state-box';
        }

        function showMenu() {
            currentState = 'menu';
            document.getElementById('menu-demo').style.display = 'flex';
            document.getElementById('game-demo').style.display = 'none';
            updateStateDisplay();
        }

        function showGame() {
            currentState = 'game';
            document.getElementById('menu-demo').style.display = 'none';
            document.getElementById('game-demo').style.display = 'flex';
            updateStateDisplay();
        }

        function startGame() {
            // Mostrar estado de transici√≥n brevemente
            document.getElementById('state-transition').className = 'state-box active';
            
            setTimeout(() => {
                showGame();
            }, 500);
        }

        function backToMenu() {
            showMenu();
        }

        // Inicializar
        updateStateDisplay();

        // Animaci√≥n del t√≠tulo en la demo
        setInterval(() => {
            const title = document.querySelector('.menu-title');
            if (title && currentState === 'menu') {
                const time = Date.now() / 1000;
                const scale = 1 + Math.sin(time * 2) * 0.05;
                title.style.transform = `scale(${scale})`;
            }
        }, 50);

        // Controles de teclado
        document.addEventListener('keydown', (event) => {
            switch(event.key.toLowerCase()) {
                case 'escape':
                    if (currentState === 'game') {
                        backToMenu();
                    }
                    break;
                case 'enter':
                case ' ':
                    if (currentState === 'menu') {
                        startGame();
                    }
                    break;
            }
        });
    </script>
</body>
</html>